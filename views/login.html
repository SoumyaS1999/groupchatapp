<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
</head>
<body>
    <form id="form" onsubmit="login(event)">
        <label for ="email">Enter Email:</label><br>
        <input name="email" type="text" id="email" autocomplete="email"><br>
        <label for ="password">Enter Password:</label><br>
        <input name="password" type="password" id="password" autocomplete="off"><br>
        <input class= "submit" type="submit" id="btn" value="submit" ><br>
    </form>

    <button class="password" onclick="forgotpassword()"> Forgot password</button><br>
    <a href='./signup.html' class="link">New User- Sign Up</a>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.0/axios.min.js"></script>

    <script>
        function login(event){ 
    event.preventDefault();

    const email=event.target.email.value;
    const password=event.target.password.value;


    const loginDetails ={
        email,
        password
    }
    axios.post("http://localhost:5000/user/login",loginDetails)
    .then((response)=>{
        console.log(response)
        if(response.status===200){
            alert(response.data.message)
            localStorage.setItem('token', response.data.token)
            window.location.href="./chat.html"
        }else{
            throw new Error(response.data.message)
        }
    })
    .catch((err)=>{
        console.log(err)
        document.body.innerHTML += `<div style="color: red;">${err}</div>`;
    })

    }
function forgotpassword() {
    window.location.href = "./password.html"
}
      
    </script>
</body>
</html>